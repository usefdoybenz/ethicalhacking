{"id":85,"date":"2024-02-04T23:25:59","date_gmt":"2024-02-04T22:25:59","guid":{"rendered":"http:\/\/localhost\/ethicalhacking\/?page_id=85"},"modified":"2024-02-04T23:25:59","modified_gmt":"2024-02-04T22:25:59","slug":"subida-de-archivo-malicioso-web-shell","status":"publish","type":"page","link":"http:\/\/localhost\/ethicalhacking\/subida-de-archivo-malicioso-web-shell\/","title":{"rendered":"Subida de archivo malicioso (web shell)"},"content":{"rendered":"\n<p>Definici\u00f3n:<\/p>\n\n\n\n<p>Una \u00abweb shell\u00bb es un script o programa malicioso que se instala en un servidor web con el prop\u00f3sito de proporcionar a los atacantes acceso remoto y control sobre el sistema a trav\u00e9s de una interfaz basada en web. Este tipo de herramienta es utilizada en ciberataques para ejecutar comandos, manipular archivos y llevar a cabo acciones maliciosas en el servidor comprometido.<\/p>\n\n\n\n<p>El prop\u00f3sito de este escenario es poder subir un archivo a un sitio web, dicho archivo contiene un script que al ser ejecutado nosotros como  atacantes obtendremos acceso remoto y control total sobre la m\u00e1quina v\u00edctima.<\/p>\n\n\n\n<p>Para este caso emplearemos  la m\u00e1quina Soccer de la plataforma Hack The Box (10.10.11.194) .<\/p>\n\n\n\n<p>En el sitio web observamos que nos permite subir un archivo en PHP :<\/p>\n\n\n\n<figure class=\"wp-block-image size-full is-resized\"><img loading=\"lazy\" decoding=\"async\" width=\"1038\" height=\"445\" src=\"http:\/\/localhost\/ethicalhacking\/wp-content\/uploads\/2024\/02\/image-5.png\" alt=\"\" class=\"wp-image-86\" style=\"width:998px;height:auto\"\/><\/figure>\n\n\n\n<p>Primero creamos el archivo malicioso que contiene un c\u00f3digo escrito en PHP con una secuencia ejecutable en BASH en nuestra m\u00e1quina atacante Linux, el c\u00f3digo si se llega a ejecutar nos permitir\u00e1 una reverse shell y por tanto acceso a la m\u00e1quina v\u00edctima, el comando malicioso espec\u00edfica la IP de la m\u00e1quina atacante y el puerto de escucha:<\/p>\n\n\n\n<figure class=\"wp-block-image size-full is-resized\"><img loading=\"lazy\" decoding=\"async\" width=\"529\" height=\"101\" src=\"http:\/\/localhost\/ethicalhacking\/wp-content\/uploads\/2024\/02\/image-6.png\" alt=\"\" class=\"wp-image-87\" style=\"width:981px;height:auto\"\/><\/figure>\n\n\n\n<figure class=\"wp-block-image size-full is-resized\"><img loading=\"lazy\" decoding=\"async\" width=\"1442\" height=\"292\" src=\"http:\/\/localhost\/ethicalhacking\/wp-content\/uploads\/2024\/02\/image-7.png\" alt=\"\" class=\"wp-image-88\" style=\"width:977px;height:auto\"\/><\/figure>\n\n\n\n<p>Una vez subido el archivo  nos ponemos en escucha desde la m\u00e1quina atacante (10.10.14.14) en el puerto establecido (443):<\/p>\n\n\n\n<figure class=\"wp-block-image size-full is-resized\"><img loading=\"lazy\" decoding=\"async\" width=\"436\" height=\"120\" src=\"http:\/\/localhost\/ethicalhacking\/wp-content\/uploads\/2024\/02\/image-8.png\" alt=\"\" class=\"wp-image-89\" style=\"width:974px;height:auto\"\/><\/figure>\n\n\n\n<p>Una vez ejecutado el archivo obtendremos acceso en la m\u00e1quina atacante, en este caso el archivo se ejecuta desde el navegador cargando el archivo subido o en su caso se puede hacer una solicitud con el comando curl al mismo sitio:<\/p>\n\n\n\n<p>http:\/\/soccer.htb\/tiny\/uploads\/malicious.php<\/p>\n\n\n\n<figure class=\"wp-block-image size-full is-resized\"><img loading=\"lazy\" decoding=\"async\" width=\"845\" height=\"205\" src=\"http:\/\/localhost\/ethicalhacking\/wp-content\/uploads\/2024\/02\/image-9.png\" alt=\"\" class=\"wp-image-90\" style=\"width:973px;height:auto\"\/><\/figure>\n","protected":false},"excerpt":{"rendered":"<p>Definici\u00f3n: Una \u00abweb shell\u00bb es un script o programa malicioso que se instala en un servidor web con el prop\u00f3sito de proporcionar a los atacantes acceso remoto y control sobre el sistema a trav\u00e9s de una interfaz basada en web. Este tipo de herramienta es utilizada en ciberataques para ejecutar comandos, manipular archivos y llevar [&hellip;]<\/p>\n","protected":false},"author":1,"featured_media":0,"parent":0,"menu_order":0,"comment_status":"closed","ping_status":"closed","template":"","meta":{"footnotes":""},"_links":{"self":[{"href":"http:\/\/localhost\/ethicalhacking\/wp-json\/wp\/v2\/pages\/85"}],"collection":[{"href":"http:\/\/localhost\/ethicalhacking\/wp-json\/wp\/v2\/pages"}],"about":[{"href":"http:\/\/localhost\/ethicalhacking\/wp-json\/wp\/v2\/types\/page"}],"author":[{"embeddable":true,"href":"http:\/\/localhost\/ethicalhacking\/wp-json\/wp\/v2\/users\/1"}],"replies":[{"embeddable":true,"href":"http:\/\/localhost\/ethicalhacking\/wp-json\/wp\/v2\/comments?post=85"}],"version-history":[{"count":1,"href":"http:\/\/localhost\/ethicalhacking\/wp-json\/wp\/v2\/pages\/85\/revisions"}],"predecessor-version":[{"id":91,"href":"http:\/\/localhost\/ethicalhacking\/wp-json\/wp\/v2\/pages\/85\/revisions\/91"}],"wp:attachment":[{"href":"http:\/\/localhost\/ethicalhacking\/wp-json\/wp\/v2\/media?parent=85"}],"curies":[{"name":"wp","href":"https:\/\/api.w.org\/{rel}","templated":true}]}}